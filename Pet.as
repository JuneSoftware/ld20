package  {		import Hero;	import Light;	import flash.display.*;	import flash.events.Event;		public class Pet extends MovieClip {		public var hero:Hero;		var light:Light;		public var jumpInProgress:Boolean = false;		var vx:Number;		public var vy:Number;		var ax:Number;		var g:Number = 0.2;				public function Pet() {			light = new Light();			light.blendMode = "multiply";			this.addChild(light);			this.addEventListener(Event.ENTER_FRAME, update);						reset();		}				public function reset():void {			this.hero = null;			this.x = 140;			this.y = 160;			this.vx = 0;			this.vy = 0;			this.scaleX = 1;		}				function update(e:Event):void {			if(!hero) return;			var dx = this.x - hero.x;			var dy = this.y - hero.y;			ax = 0;			if(dx < -30) {				ax = 0.5;				this.scaleX = 1;			} else if(dx > 30) {				ax = -0.5;				this.scaleX = -1;			}			if(dy > 40 && !jumpInProgress) {				jumpInProgress = true;				vy = -5;			}						vx += ax;			vy += g;			vx *= 0.9; // damping						var vxMax = 3;			if(vx > vxMax) vx = vxMax;			if(vx < -vxMax) vx = -vxMax;						this.x += vx;			this.y += vy;						if(this.y > 160) {				vy = 0;				this.y = 160;				jumpInProgress = false;			}		}				public function shoot(tx:Number,ty:Number):void {			trace("shoot");			var laser:MovieClip = new MovieClip();			laser.graphics.lineStyle(2,0xFF0000);			laser.graphics.lineTo(tx, ty);			this.addChild(laser);		}	}	}